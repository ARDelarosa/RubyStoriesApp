<%= form_with(model: story, local: true, class: "story-form") do |form| %>

  <% if story.errors.any? %>
    <div class="alert alert-danger mb-4">
      <h4 class="alert-heading mb-2">
        <%= pluralize(story.errors.count, "error") %> prevented this story from being saved:
      </h4>
      <ul class="mb-0">
        <% story.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3">
    <%= form.label :title, class: "form-label fw-semibold" %>
    <%= form.text_field :title, class: "form-control #{'is-invalid' if story.errors[:title].any?}" %>
    <% if story.errors[:title].any? %>
      <div class="invalid-feedback">
        <%= story.errors[:title].first %>
      </div>
    <% end %>
  </div>

  <div class="mb-3">
    <%= form.label :body, "Story", class: "form-label fw-semibold" %>
    <%= form.text_area :body, rows: 8, class: "form-control #{'is-invalid' if story.errors[:body].any?}" %>
    <% if story.errors[:body].any? %>
      <div class="invalid-feedback">
        <%= story.errors[:body].first %>
      </div>
    <% end %>
  </div>

  <div class="d-flex gap-2">
    <%= form.submit (story.persisted? ? "Update Story" : "Create Story"),
      class: "btn btn-primary" %>

    <%= link_to "Cancel", stories_path, class: "btn btn-outline-secondary" %>
  </div>

<% end %>
